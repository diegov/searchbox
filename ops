{"author":{"id":"79d8b19c29ec72c77b88adefa79ebc43ac626b76c7123a6dd579691f2c538d6a"},"ops":[{"type":1,"timestamp":1634991178,"nonce":"1jpCsrRZvJTJkuRgbl0/3cGbim4=","metadata":{"github-id":"I_kwDODtTX3c49o-4H","github-url":"https://github.com/diegov/searchbox/issues/11","origin":"github"},"title":"lxml error when parsing documents that contain encoding declaration","message":"```\n2021-10-22 23:56:07 [pocket] ERROR: Unicode strings with encoding declaration are not supported. Please use bytes input or XML fragments without declaration.\nTraceback (most recent call last):\n  File \"/home/d/code/projects/searchbox/searchbox/pipelines.py\", line 34, in process_item\n    extractor = MicroformatExtractor(base_url, html)\n  File \"/home/d/code/projects/searchbox/searchbox/extractors.py\", line 122, in __init__\n    self.data = extruct.extract(html, base_url=base_url)\n  File \"/home/d/code/projects/searchbox/venv/lib/python3.9/site-packages/extruct/_extruct.py\", line 60, in extract\n    tree = parse_xmldom_html(htmlstring, encoding=encoding)\n  File \"/home/d/code/projects/searchbox/venv/lib/python3.9/site-packages/extruct/utils.py\", line 16, in parse_xmldom_html\n    return lxml.html.fromstring(html, parser=parser)\n  File \"/home/d/code/projects/searchbox/venv/lib/python3.9/site-packages/lxml/html/__init__.py\", line 875, in fromstring\n    doc = document_fromstring(html, parser=parser, base_url=base_url, **kw)\n  File \"/home/d/code/projects/searchbox/venv/lib/python3.9/site-packages/lxml/html/__init__.py\", line 761, in document_fromstring\n    value = etree.fromstring(html, parser, **kw)\n  File \"src/lxml/etree.pyx\", line 3237, in lxml.etree.fromstring\n  File \"src/lxml/parser.pxi\", line 1891, in lxml.etree._parseMemoryDocument\nValueError: Unicode strings with encoding declaration are not supported. Please use bytes input or XML fragments without declaration.\n```","files":null}]}